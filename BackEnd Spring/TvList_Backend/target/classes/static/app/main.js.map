{"version":3,"file":"main.js","sourceRoot":"","sources":["main.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component,ViewChild,OnInit} from 'angular2/core';\r\nimport {Router,RouteConfig,  ROUTER_DIRECTIVES,CanDeactivate ,ComponentInstruction} from 'angular2/router';\r\nimport {Utilities} from './utilities';\r\nimport {Injector} from 'angular2/core';\r\nimport {modalComponent} from \"./components/modal/modal.component\";\r\nimport {indexComponent} from './components/index/index.component';\r\nimport {perfilComponent} from './components/perfil/perfil.Component';\r\nimport {adminComponent} from './components/admin/admin.Component';\r\nimport {centroUsuarioComponent} from './components/centroUsuario/centroUsuario.component';\r\nimport {userService} from './components/user/user.service';\r\nimport {breadCrumbService} from './components/breadCrumb/breadCrumb.service';\r\nimport {proyeccionesListComponent} from './components/proyecciones/proyeccionesList/proyeccionesList.Component';\r\n\r\n\r\n@Component({\r\n  selector: 'main-app',\r\n  templateUrl: 'app/main.html',\r\n  directives: [ROUTER_DIRECTIVES,modalComponent]\r\n})\r\n@RouteConfig([\r\n  {\r\n    path: '/',\r\n    name: 'Index',\r\n    component: indexComponent,\r\n    useAsDefault: true\r\n  },\r\n  {\r\n    path: '/perfil/...',\r\n    name: 'Perfil',\r\n    component: perfilComponent\r\n  },\r\n  {\r\n    path: '/admin/...',\r\n    name: 'Admin',\r\n    component: adminComponent\r\n  },\r\n  {\r\n    path: '/peliculas',\r\n    name: 'Peliculas',\r\n    component: proyeccionesListComponent\r\n  }\r\n])\r\n\r\nexport class MainApp implements OnInit{\r\n  ngOnInit():any {\r\n    this._breadCrumbService.host=window.location.origin;\r\n  }\r\n  \r\n  private keep:boolean=true;\r\n  private _componenteACargar = centroUsuarioComponent;\r\n  @ViewChild('modal') private modal:modalComponent;\r\n\r\n  constructor(private _router: Router,private _servicioUsuarios:userService,private _breadCrumbService:breadCrumbService) {\r\n\r\n\r\n    _router.subscribe((val) => {\r\n      _router.recognize(val).then(x=>{\r\n        console.log(x)})\r\n      let abrir_modal_login=window.location;\r\n      _breadCrumbService.generateBreadCrumb(val);\r\n    });\r\n\r\n\r\n\r\n/*\r\n    V1\r\n    Actualmente Angular 2 no soporta manipulacion de #\r\n    https://github.com/angular/angular/issues/7215\r\n    window.location.hash=window.location.hash;\r\n    _router.subscribe((val) => {\r\n      let abrir_modal_login=window.location.hash;\r\n      this.abrirModal(abrir_modal_login);\r\n    });\r\n*/\r\n\r\n    _servicioUsuarios.loginSucces$.subscribe((suc) =>{\r\n      if (suc){\r\n        this.modal.toggleModal();\r\n        this.cargarUsuario();\r\n        this.keep=false;\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  private navigateByUrl(url:string){\r\n    this._router.navigateByUrl(url).then(x=>{return true});\r\n  }\r\n\r\n  private cargarUsuario(){\r\n\r\n  }\r\n\r\n/*\r\n  V1\r\n  private mostrarLogin(){\r\n    window.location.hash=\"#login\";\r\n  }\r\n*/\r\n\r\n  private mostrarLogin(){\r\n    this.keep=true;\r\n    setTimeout((a)=>{\r\n      this.modal.toggleModal();\r\n\r\n    },0)\r\n\r\n\r\n  }\r\n\r\n  private _desconectarUsuario(){\r\n    this._router.navigate(['/Index']);\r\n    this._servicioUsuarios.logOut().subscribe();\r\n  }\r\n\r\n\r\n  /*\r\n  V1\r\n  private abrirModal(hash:string){\r\n    switch (hash){\r\n      case \"#login\":\r\n        this._mostrar=true;\r\n      break;\r\n      case \"#register\":\r\n      break;\r\n      case \"\":\r\n        this._mostrar=false;\r\n      break;\r\n    }\r\n  }\r\n*/\r\n\r\n\r\n\r\n}\r\n"]}