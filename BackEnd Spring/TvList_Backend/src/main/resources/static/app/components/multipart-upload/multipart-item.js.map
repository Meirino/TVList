{"version":3,"file":"multipart-item.js","sourceRoot":"","sources":["multipart-item.ts"],"names":[],"mappings":"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","sourcesContent":["import {MultipartUploader} from \"./multipart-uploader\";\r\n\r\nexport class MultipartItem {\r\n\t\r\n  public alias:string = 'file';\r\n  public url:string = '/';\r\n  public method:string = 'POST';\r\n  public headers:any = [];\r\n  public withCredentials:boolean = true;\r\n  public formData:FormData = null;\r\n  public isReady:boolean = false;\r\n  public isUploading:boolean = false;\r\n  public isUploaded:boolean = false;\r\n  public isSuccess:boolean = false;\r\n  public isCancel:boolean = false;\r\n  public isError:boolean = false;\r\n  public progress:number = 0;\r\n  public index:number = null;\r\n  public callback:Function = null;\r\n\r\n  constructor(private uploader:MultipartUploader) {\r\n  }\r\n\r\n  public upload() {\r\n    try {\r\n      console.debug(\"multipart-item.ts & upload() ==>.\");\r\n      this.uploader.uploadItem(this);\r\n    } catch (e) {\r\n      //this.uploader._onCompleteItem(this, '', 0, []);\r\n      //this.uploader._onErrorItem(this, '', 0, []);\r\n    }\r\n  }\r\n\r\n  public init(){\r\n    this.isReady = false;\r\n    this.isUploading = false;\r\n    this.isUploaded = false;\r\n    this.isSuccess = false;\r\n    this.isCancel = false;\r\n    this.isError = false;\r\n    this.progress = 0;\r\n    this.formData = null;\r\n    this.callback = null;\r\n  }\r\n\r\n  public onBeforeUpload() {\r\n  }\r\n\r\n  public onProgress(progress:number) {\r\n  }\r\n\r\n  public onSuccess(response:any, status:any, headers:any) {\r\n  }\r\n\r\n  public onError(response:any, status:any, headers:any) {\r\n  }\r\n\r\n  public onCancel(response:any, status:any, headers:any) {\r\n  }\r\n\r\n  public onComplete(response:any, status:any, headers:any) {\r\n    this.callback(response,status,headers);\r\n    this.init();\r\n  }\r\n\r\n  private _onBeforeUpload() {\r\n    this.isReady = true;\r\n    this.isUploading = true;\r\n    this.isUploaded = false;\r\n    this.isSuccess = false;\r\n    this.isCancel = false;\r\n    this.isError = false;\r\n    this.progress = 0;\r\n    this.onBeforeUpload();\r\n  }\r\n\r\n  private _onProgress(progress:number) {\r\n    this.progress = progress;\r\n    this.onProgress(progress);\r\n  }\r\n\r\n  private _onSuccess(response:any, status:any, headers:any) {\r\n    this.isReady = false;\r\n    this.isUploading = false;\r\n    this.isUploaded = true;\r\n    this.isSuccess = true;\r\n    this.isCancel = false;\r\n    this.isError = false;\r\n    this.progress = 100;\r\n    this.index = null;\r\n    this.onSuccess(response, status, headers);\r\n  }\r\n\r\n  private _onError(response:any, status:any, headers:any) {\r\n    this.isReady = false;\r\n    this.isUploading = false;\r\n    this.isUploaded = true;\r\n    this.isSuccess = false;\r\n    this.isCancel = false;\r\n    this.isError = true;\r\n    this.progress = 0;\r\n    this.index = null;\r\n    this.onError(response, status, headers);\r\n    this.callback(response, status, headers);\r\n  }\r\n\r\n  private _onCancel(response:any, status:any, headers:any) {\r\n    this.isReady = false;\r\n    this.isUploading = false;\r\n    this.isUploaded = false;\r\n    this.isSuccess = false;\r\n    this.isCancel = true;\r\n    this.isError = false;\r\n    this.progress = 0;\r\n    this.index = null;\r\n    this.onCancel(response, status, headers);\r\n  }\r\n\r\n  private _onComplete(response:any, status:any, headers:any) {\r\n    this.onComplete(response, status, headers);\r\n  }\r\n\r\n  private _prepareToUploading() {\r\n    this.isReady = true;\r\n  }\r\n}\r\n"]}