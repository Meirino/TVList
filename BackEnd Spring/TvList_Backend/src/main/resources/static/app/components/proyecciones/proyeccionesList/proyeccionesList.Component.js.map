{"version":3,"file":"proyeccionesList.Component.js","sourceRoot":"","sources":["proyeccionesList.Component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component,OnInit,ElementRef,ViewChild} from 'angular2/core';\r\nimport {proyeccionesItemComponent} from '../proyeccionesItem/proyeccionesItem.Component';\r\nimport {modalComponent} from '../../modal/modal.component';\r\nimport {proyeccionesFormComponent} from '../proyeccionesForm/proyeccionesForm.Component';\r\nimport {proyeccionService} from '../proyeccion.service';\r\nimport {RouteParams} from 'angular2/router';\r\nimport {proyeccion} from '../proyeccion.data';\r\nimport {Location} from 'angular2/router';\r\nimport {Control} from 'angular2/common';\r\n\r\n\r\n@Component({\r\n  templateUrl: './app/components/proyecciones/proyeccionesList/proyeccionesList.Template.html',\r\n  styleUrls: ['./app/components/proyecciones/proyeccionesList/proyeccionesList.Style.css'],\r\n  directives: [proyeccionesItemComponent,modalComponent]\r\n})\r\n\r\nexport class proyeccionesListComponent implements OnInit{\r\n\r\n\r\n  private type:string;\r\n  private title:string;\r\n  private page:number;\r\n  private peliculas:proyeccion[];\r\n  private maxPage:number;\r\n  private siguiente:number;\r\n  private anterior:number;\r\n\r\n  busqueda = new Control();\r\n\r\n\r\n\r\n  private succesLabel:boolean=false;\r\n  private keep:boolean=true;\r\n  private _componenteACargar = proyeccionesFormComponent;\r\n  @ViewChild('modal') private modal:modalComponent;\r\n  \r\n  \r\n  \r\n  \r\n  \r\n  constructor(private _proServ:proyeccionService, params: RouteParams,private location:Location){\r\n    this.succesLabel=false;\r\n    this.type=params.get(\"genre\");\r\n    this.title=params.get(\"title\");\r\n    this.page=Number.parseInt(params.get(\"page\"));\r\n    if (!this.page)\r\n      this.page=0;\r\n    this.busqueda.valueChanges.debounceTime(400)\r\n        .distinctUntilChanged()\r\n        .switchMap(busqueda=>this._proServ.getPeliculasByTypeAndTitleAndPage(this.type,busqueda,\"0\")).subscribe(res =>{\r\n              this.title=this.busqueda.value;\r\n              this.page=0;\r\n              this.peliculas=this._proServ.convertirAListaPeliculas((<any>res).contenido);\r\n              this.actualizarPagina((<any>res).paginaActual,(<any>res).paginaTotal);\r\n              console.log(this.peliculas);\r\n            },\r\n            err => {\r\n              console.log(err);\r\n            }\r\n        );\r\n    _proServ.createSucces$.subscribe((suc) =>{\r\n      if (suc){\r\n        this.modal.toggleModal();\r\n\r\n        setTimeout((a)=>{\r\n          this.keep=false;\r\n          this.succesLabel=true;\r\n        },0);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  ngOnInit():any {\r\n    this.cargarPeliculas();\r\n  }\r\n\r\n  private cargarPeliculas(){\r\n\r\n    let peliculas$=this._proServ.getPeliculasByTypeAndTitleAndPage(this.type,this.title,this.page.toString());\r\n    peliculas$.subscribe(res =>{\r\n      this.peliculas=this._proServ.convertirAListaPeliculas((<any>res).contenido);\r\n      this.actualizarPagina((<any>res).paginaActual,(<any>res).paginaTotal);\r\n      console.log(this.peliculas);\r\n    },\r\n    err => {\r\n      console.log(err);\r\n    }\r\n    );\r\n\r\n  }\r\n\r\n  private prev(){\r\n    this.cargar(this.anterior);\r\n  }\r\n\r\n  private next(){\r\n    this.cargar(this.siguiente);\r\n  }\r\n\r\n  private cargar(pag){\r\n    this.page=pag;\r\n    this.cargarPeliculas();\r\n  }\r\n\r\n\r\n\r\n  private actualizarPagina(paginaActual,paginaTotal){\r\n    var tip=\"\";\r\n    var titulo=\"\";\r\n    if (this.type)\r\n      tip=\"&genre=\"+this.type;\r\n    if (this.title)\r\n      titulo=\"&title=\"+this.title;\r\n    this.location.go(\"/peliculas?page=\"+paginaActual+tip+titulo);\r\n    this.page=Number.parseInt(paginaActual);\r\n    this.maxPage=Number.parseInt(paginaTotal);\r\n    this.siguiente=this.page+1;\r\n    this.anterior=this.page-1;\r\n  }\r\n\r\n\r\n  private buscarPorTitulo(val){\r\n  var ite=val;\r\n\r\n  }\r\n\r\n  private mostrarCrearPelicula(){\r\n    this.keep=true;\r\n    setTimeout((a)=>{\r\n      this.modal.toggleModal();\r\n    },0)\r\n\r\n\r\n  }\r\n\r\n}\r\n"]}