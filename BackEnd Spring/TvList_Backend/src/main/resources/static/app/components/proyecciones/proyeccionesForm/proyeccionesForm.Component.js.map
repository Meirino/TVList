{"version":3,"file":"proyeccionesForm.Component.js","sourceRoot":"","sources":["proyeccionesForm.Component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component,ViewChild,ElementRef, OnInit} from 'angular2/core';\r\nimport {proyeccion,tipo} from '../proyeccion.data';\r\nimport {proyeccionService} from '../proyeccion.service';\r\n\r\n@Component({\r\n  selector: 's-proyeccionesItem',\r\n  templateUrl: './app/components/proyecciones/proyeccionesForm/proyeccionesForm.Template.html',\r\n  styleUrls: ['./app/components/proyecciones/proyeccionesForm/proyeccionesForm.Style.css']\r\n})\r\n\r\nexport class proyeccionesFormComponent implements OnInit{\r\n\r\n  private file: File;\r\n\r\n  private imagenPrev:boolean=false;\r\n  \r\n\r\n  @ViewChild('movieForm') movieForm;\r\n\r\n  private movieToCreate:proyeccion=new proyeccion();\r\n  private tipos:tipo[];\r\n\r\n  constructor(private _serPel:proyeccionService){\r\n  }\r\n\r\n\r\n  ngOnInit():any {\r\n    this.tipos=this._serPel.getTiposPelicula();\r\n    this.movieToCreate.tipo=this.tipos[0].id.toString();\r\n  }\r\n\r\n  private agregarPelicula(){\r\n    if (this.file){\r\n      let multipartItem=this._serPel.upload(this.file);\r\n      multipartItem.callback = (data, status, headers) => {\r\n        if (status == 200){\r\n          this.movieToCreate.image=data;\r\n          console.debug(\"File has been uploaded\");\r\n          this._serPel.createProy(this.movieToCreate).subscribe(res=>{\r\n            console.log(res);\r\n          },\r\n              error=>{\r\n                console.log(error);\r\n              });\r\n        } else {\r\n          console.error(\"Error uploading file\");\r\n        }\r\n      };\r\n      multipartItem.upload();\r\n    }\r\n    else\r\n      this._serPel.createProy(this.movieToCreate).subscribe(res=>{\r\n        console.log(res);\r\n      },\r\n      error=>{\r\n        console.log(error);\r\n      });\r\n  }\r\n  \r\n  \r\n\r\n  private selectFile($event) {\r\n    this.file = $event.target.files[0];\r\n    if (this.file)\r\n    {\r\n      this.imagenPrev=true;\r\n      var ctx=(<any>document.getElementById('canvas')).getContext('2d');\r\n      var reader  = new FileReader();\r\n      var img = new Image();\r\n      img.onload = function() {\r\n        ctx.canvas.width = img.width;\r\n        ctx.canvas.height = img.height;\r\n        ctx.drawImage(img, 0, 0\r\n            , ctx.canvas.width, ctx.canvas.height\r\n        );\r\n      }\r\n      reader.onloadend = function () {\r\n        img.src = reader.result;\r\n      }\r\n      reader.readAsDataURL(this.file);\r\n    }\r\n    else{\r\n      this.imagenPrev=false;\r\n    }\r\n  }\r\n\r\n}\r\n"]}